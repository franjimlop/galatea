{"ast":null,"code":"import React,{useState,useEffect}from'react';import'../styles/login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const GestionConsejo=()=>{const[nombre,setNombre]=useState('');const[origen,setOrigen]=useState('');const[miembrosConsejo,setMiembrosConsejo]=useState([]);const[miembroSeleccionado,setMiembroSeleccionado]=useState('');useEffect(()=>{const obtenerMiembros=async()=>{try{const response=await fetch('http://localhost:5000/consejo');if(response.ok){const data=await response.json();setMiembrosConsejo(data);}else{console.error('Error al obtener la lista de miembros');}}catch(error){console.error('Error al obtener la lista de miembros:',error);}};obtenerMiembros();},[]);const handleNombreChange=e=>{setNombre(e.target.value);};const handleOrigenChange=e=>{setOrigen(e.target.value);};const handleMiembroSeleccionadoChange=e=>{setMiembroSeleccionado(e.target.value);};const handleCrearMiembroSubmit=async e=>{e.preventDefault();if(!nombre||!origen){alert('Por favor, completa todos los campos');return;}try{const formData=new FormData();formData.append('nombre',nombre);formData.append('origen',origen);const response=await fetch('http://localhost:5000/consejo',{method:'POST',body:formData});if(response.ok){alert('Miembro creado exitosamente');setNombre('');setOrigen('');window.location.reload();}else{alert('Error al crear miembro');}}catch(error){console.error('Error al enviar datos al backend:',error);}};const handleBorrarMiembroSubmit=async e=>{e.preventDefault();if(!miembroSeleccionado){alert('Por favor, selecciona un miembro para borrar');return;}try{const response=await fetch(\"http://localhost:5000/consejo/\".concat(miembroSeleccionado),{method:'DELETE'});if(response.ok){alert('IMiembro borrado exitosamente');window.location.reload();}else{const data=await response.json();alert(\"Error al borrar miembro: \".concat(data.error));}}catch(error){console.error('Error al enviar solicitud de borrado al backend:',error);alert('Error al conectar con el servidor');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"py-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"pb-3\",children:\"Crear Miembro del Consejo\"}),/*#__PURE__*/_jsxs(\"form\",{action:\"#\",method:\"post\",onSubmit:handleCrearMiembroSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"nombre\",children:\"Nombre del miembro:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"nombre\",name:\"nombre\",value:nombre,onChange:handleNombreChange,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"origen\",children:\"Origen del miembro (Profesor, AMPA...):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"origen\",name:\"origen\",value:origen,onChange:handleOrigenChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"div pt-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Crear Miembro\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"py-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"pb-3\",children:\"Borrar Miembro del Consejo\"}),/*#__PURE__*/_jsxs(\"form\",{action:\"#\",method:\"post\",onSubmit:handleBorrarMiembroSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"miembro\",children:\"Seleccionar miembro:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"miembro\",id:\"miembro\",value:miembroSeleccionado,onChange:handleMiembroSeleccionadoChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona un miembro\"}),miembrosConsejo.map(miembro=>/*#__PURE__*/_jsx(\"option\",{value:miembro.id,children:miembro.nombre},miembro.id))]}),/*#__PURE__*/_jsx(\"div\",{className:\"div pt-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Borrar miembro\"})})]})]})})]});};export default GestionConsejo;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","GestionConsejo","nombre","setNombre","origen","setOrigen","miembrosConsejo","setMiembrosConsejo","miembroSeleccionado","setMiembroSeleccionado","obtenerMiembros","response","fetch","ok","data","json","console","error","handleNombreChange","e","target","value","handleOrigenChange","handleMiembroSeleccionadoChange","handleCrearMiembroSubmit","preventDefault","alert","formData","FormData","append","method","body","window","location","reload","handleBorrarMiembroSubmit","concat","children","className","action","onSubmit","htmlFor","type","id","name","onChange","required","map","miembro"],"sources":["C:/Users/franc/OneDrive/Documents/GitHub/galatea/src/pages/gestconsejo.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../styles/login.css';\r\n\r\nconst GestionConsejo = () => {\r\n    const [nombre, setNombre] = useState('');\r\n    const [origen, setOrigen] = useState('');\r\n    const [miembrosConsejo, setMiembrosConsejo] = useState([]);\r\n    const [miembroSeleccionado, setMiembroSeleccionado] = useState('');\r\n\r\n    useEffect(() => {\r\n        const obtenerMiembros = async () => {\r\n            try {\r\n                const response = await fetch('http://localhost:5000/consejo');\r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    setMiembrosConsejo(data);\r\n                } else {\r\n                    console.error('Error al obtener la lista de miembros');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error al obtener la lista de miembros:', error);\r\n            }\r\n        };\r\n\r\n        obtenerMiembros();\r\n    }, []);\r\n\r\n    const handleNombreChange = (e) => {\r\n        setNombre(e.target.value);\r\n    };\r\n\r\n    const handleOrigenChange = (e) => {\r\n        setOrigen(e.target.value);\r\n    };\r\n\r\n    const handleMiembroSeleccionadoChange = (e) => {\r\n        setMiembroSeleccionado(e.target.value);\r\n    };\r\n\r\n    const handleCrearMiembroSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!nombre || !origen) {\r\n            alert('Por favor, completa todos los campos');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const formData = new FormData();\r\n            formData.append('nombre', nombre);\r\n            formData.append('origen', origen);\r\n\r\n            const response = await fetch('http://localhost:5000/consejo', {\r\n                method: 'POST',\r\n                body: formData,\r\n            });\r\n\r\n            if (response.ok) {\r\n                alert('Miembro creado exitosamente');\r\n                setNombre('');\r\n                setOrigen('');\r\n                window.location.reload();\r\n            } else {\r\n                alert('Error al crear miembro');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al enviar datos al backend:', error);\r\n        }\r\n    };\r\n\r\n    const handleBorrarMiembroSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!miembroSeleccionado) {\r\n            alert('Por favor, selecciona un miembro para borrar');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`http://localhost:5000/consejo/${miembroSeleccionado}`, {\r\n                method: 'DELETE',\r\n            });\r\n\r\n            if (response.ok) {\r\n                alert('IMiembro borrado exitosamente');\r\n                window.location.reload();\r\n            } else {\r\n                const data = await response.json();\r\n                alert(`Error al borrar miembro: ${data.error}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al enviar solicitud de borrado al backend:', error);\r\n            alert('Error al conectar con el servidor');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"py-5\">\r\n                <div className=\"login-container\">\r\n                    <h2 className=\"pb-3\">Crear Miembro del Consejo</h2>\r\n                    <form action=\"#\" method=\"post\" onSubmit={handleCrearMiembroSubmit}>\r\n                        <label htmlFor=\"nombre\">Nombre del miembro:</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"nombre\"\r\n                            name=\"nombre\"\r\n                            value={nombre}\r\n                            onChange={handleNombreChange}\r\n                            required\r\n                        />\r\n                        <label htmlFor=\"origen\">Origen del miembro (Profesor, AMPA...):</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"origen\"\r\n                            name=\"origen\"\r\n                            value={origen}\r\n                            onChange={handleOrigenChange}\r\n                            required\r\n                        />\r\n                        <div className=\"div pt-4\">\r\n                            <input type=\"submit\" value=\"Crear Miembro\" />\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n            <div className=\"py-5\">\r\n                <div className=\"login-container\">\r\n                    <h2 className=\"pb-3\">Borrar Miembro del Consejo</h2>\r\n                    <form action=\"#\" method=\"post\" onSubmit={handleBorrarMiembroSubmit}>\r\n                        <label htmlFor=\"miembro\">Seleccionar miembro:</label>\r\n                        <select\r\n                            name=\"miembro\"\r\n                            id=\"miembro\"\r\n                            value={miembroSeleccionado}\r\n                            onChange={handleMiembroSeleccionadoChange}\r\n                        >\r\n                            <option value=\"\">Selecciona un miembro</option>\r\n                            {/* Mapear los miembros del Consejo desde el estado local */}\r\n                            {miembrosConsejo.map(miembro => (\r\n                                <option key={miembro.id} value={miembro.id}>\r\n                                    {miembro.nombre}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                        <div className=\"div pt-4\">\r\n                            <input type=\"submit\" value=\"Borrar miembro\" />\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GestionConsejo;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}